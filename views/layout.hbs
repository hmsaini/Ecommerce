<!DOCTYPE html>
<html>

<head>
  <title>{{title}}</title>
  <link href="/public/stylesheets/bootstrap.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link href="/public/stylesheets/style.css" rel="stylesheet">
</head>

<body>
  {{{body}}}

  <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
    <div class="container">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault"
        aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      {{!-- <form action="/search" method="post" class="navbar-form navbar-left">
      <div class="form-group">
        <input type="text" name="q" class="form-control" placeholder="Search..."id="">
        <button type="submit" class="btn btn-default">Submit</button>
      </div>
      </form> --}}

      <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
          </li>

          {{#if categories}}
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">
              Categories
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              {{#each categories}}
              <a class="dropdown-item" href="/products/{{this._id}}">{{this.name}}</a>
              {{/each}}
            </div>
          </li>
          {{else}}
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">
              Categories
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="">Not Found</a>
            </div>
          </li>
          {{/if}}

          {{#if user}}
          <li class="nav-item">
            <a class="nav-link" href="/users/profile">Profile</a>
          </li>
          {{!-- <li class="nav-item">
            <a class="nav-link" href="/users/logout">Logout</a>
          </li> --}}
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">
              {{user.name}}
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="/users/logout">Logout</a>
            </div>
          </li>
          <li>
            <a href="" class="nav-link">{{user.profile.name}}</a>
          </li>
          <li>
            <a href="/cart" class="nav-link"><span class="badge"><i class="fa fa-shopping-cart"
                  style="font-size:18px;"></i> {{cart}}</span></a>
          </li>
          {{else}}
          <li class="nav-item">
            <a class="nav-link " href="/users/login">Login</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/users/signup">Sign Up</a>
          </li>
          {{/if}}
        </ul>

        <form class="form-inline my-2 my-lg-0" action="/search" method="post">
          <input class="form-control mr-sm-2" name="q" type="text" placeholder="Search..." aria-label="Search">
          <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
        </form>
      </div>
    </div>
  </nav>

  <div class="container">

    <div class="row">
      <div class="col-lg-12">
        {{#if success_msg}}
        <div class="alert alert-success">{{success_msg}}</div>
        {{/if}}

        {{#if error_msg}}
        <div class="alert alert-danger alert-dismissible">{{error_msg}}</div>
        {{/if}}

        {{#if error}}
        <div class="alert alert-danger alert-dismissible">{{error}}</div>
        {{/if}}
      </div>
    </div>
  </div>


  <div class="container">
    <footer style="margin-top:100px;">
      <div class="row">
        <div class="col-12-lg">
          <p>All rights reserved &copy; 2019 | <a href="/manage">Manage</a></p>
        </div>
      </div>
    </footer>
  </div>

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="/public/javascripts/jquery.js"></script>
  <script src="/public/javascripts/bootstrap.js"></script>
  <script src="https://js.stripe.com/v2/"></script>
  {{!-- <script src="https://js.stripe.com/v3/"></script> --}}
  <script src="/public/javascripts/spin.min.js"></script>
  <script src="/public/javascripts/custom.js"></script>

</body>

</html>